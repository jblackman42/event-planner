

<nav class="navBar">
    <div class="openButton">
        <i class="material-icons icon">menu</i>
    </div>
    <div class="navContainer closed">
        <div class="closeButton">
            <i class="material-icons icon">close</i>
        </div>
        <!-- <div class="image-container">
            <img class="logo" src="../assets/exampleLogo.png" alt="Company Name">
        </div> -->
        <div class="welcome-message">
            <p id="userWelcomeMsg"></p>
        </div>
        <div class="links">
            <ul>
                <li><a href="/">Home</a></li>
                <!-- <li><a href="/">New Event</a></li> -->
                <li id="loggedOut"><a href="/login">Login</a></li>
                <li id="loggedIn"><a onclick="logout()" href="/">Logout</a></li>
            </ul>
        </div>
        <div class="footer">
            <ul>
                <li><a href="/"><i class='fab fa-facebook-square'></i></a></li>
                <li><a href="/"><i class='fab fa-instagram'></i></a></li>
                <li><a href="/"><i class='fab fa-github-square'></i></a></li>
            </ul>
        </div>
    </div>
</nav>
  <!-- <script src="../scripts/navbar.js"></script> -->
<!-- <nav>
    <div>
        <h4 class="title">Event Planner</h4>
    </div>

    <div>
        <div id="loggedIn" style="visibility: hidden; display: none;">
            <p id="userWelcomeMsg"></p>
            <button onclick="logout()">Logout</button>
        </div>
        <div id="loggedOut">
            <a href="/login?redirect=calendar" id="loginBtn">Login</a>
        </div>
    </div>
</nav> -->
<script>
    const loggedIn = document.getElementById('loggedIn');
    const loggedOut = document.getElementById('loggedOut');

    const userWelcomeMsg = document.getElementById('userWelcomeMsg');

    const openButtonDOM = document.querySelector('.openButton');
    const closeButtonDOM = document.querySelector('.closeButton');

    const navContainerDOM = document.querySelector('.navContainer');

    openButtonDOM.addEventListener('click', () => {
    navContainerDOM.classList.toggle('open');
    navContainerDOM.classList.toggle('closed');
    })

    closeButtonDOM.addEventListener('click', () => {
    navContainerDOM.classList.toggle('open');
    navContainerDOM.classList.toggle('closed');
    })

    axios({
        method: 'get',
        url: '/api/oauth/me',
        params: {
            user_id: user_id,
            token: access_token
        }
    })
        .then(response => response.data)
        .then(data => {
            const {user} = data;
            // console.log(data)
            const name = user.DisplayName.split(', ').reverse().join(' ')

            loggedOut.style.visibility = 'hidden';
            loggedOut.style.display = 'none';

            userWelcomeMsg.innerHTML = `Welcome, ${name}`;
            loggedIn.style.visibility = 'visible';
            loggedIn.style.display = 'flex';

            // console.log(user.User_Roles)
        })

    // axios({
    //     method: 'get',
    //     url: '/api/oauth/me/roles',
    //     params: {
    //         user_id: user_id,
    //         token: access_token
    //     }
    // })
    //     .then(response => response.data)
    //     .then(data => {
    //         // console.log(data)
    //     })

    function logout() {
        //remove all cookies
        document.cookie = "user_id= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";
        document.cookie = "access_token= ; expires = Thu, 01 Jan 1970 00:00:00 GMT";

        window.location = '/'
    }

    
</script>